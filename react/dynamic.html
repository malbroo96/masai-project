<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dynamic Product Card with Validation</title>
</head>
<body>
  <div id="root"></div>

  <!-- React and ReactDOM -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>

  <!-- Babel -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel">
    const { useState } = React;


    function ProductCard({ name, price, image, discount }) {
      const cardStyle = {
        border: "1px solid #ddd",
        borderRadius: "10px",
        padding: "16px",
        margin: "12px",
        width: "250px",
        boxShadow: "0 4px 6px rgba(0,0,0,0.1)",
        position: "relative",
        backgroundColor: "#fff"
      };

      const discountBadge = {
        position: "absolute",
        top: "10px",
        right: "10px",
        backgroundColor: "red",
        color: "white",
        padding: "5px 10px",
        borderRadius: "5px",
        fontSize: "14px",
        fontWeight: "bold"
      };

      return (
        <div style={cardStyle}>
          {discount !== undefined && (
            <div style={discountBadge}>-{discount}%</div>
          )}
          <img src={image} alt={name} style={{ width: "100%", borderRadius: "8px" }} />
          <h3>{name}</h3>
          <p>Price: â‚¹{price}</p>
        </div>
      );
    }

    function App() {
      const [products, setProducts] = useState([
        { name: "Laptop", price: 50000, image: "https://via.placeholder.com/200", discount: 10 },
        { name: "Headphones", price: 2000, image: "https://via.placeholder.com/200" }
      ]);

      const [form, setForm] = useState({ name: "", price: "", image: "", discount: "" });
      const [errors, setErrors] = useState({});

      const handleChange = (e) => {
        const { name, value } = e.target;
        setForm({ ...form, [name]: value });
      };


      const validate = () => {
        let newErrors = {};
        if (!form.name.trim()) newErrors.name = "Name is required.";
        if (!form.price || isNaN(form.price) || Number(form.price) <= 0) newErrors.price = "Price must be a positive number.";
        if (!form.image.startsWith("http")) newErrors.image = "Image must be a valid URL.";
        if (form.discount) {
          if (isNaN(form.discount) || form.discount < 0 || form.discount > 100) {
            newErrors.discount = "Discount must be between 0 and 100.";
          }
        }
        return newErrors;
      };


      const handleSubmit = (e) => {
        e.preventDefault();
        const validationErrors = validate();
        if (Object.keys(validationErrors).length > 0) {
          setErrors(validationErrors);
          return;
        }

        const newProduct = {
          name: form.name,
          price: Number(form.price),
          image: form.image,
          discount: form.discount ? Number(form.discount) : undefined
        };

        setProducts([...products, newProduct]);
        setForm({ name: "", price: "", image: "", discount: "" });
        setErrors({});
      };

      return (
        <div style={{ fontFamily: "Arial", padding: "20px" }}>
          <h1>Product Catalog</h1>

          <form onSubmit={handleSubmit} style={{ marginBottom: "20px" }}>
            <input
              type="text"
              name="name"
              placeholder="Product Name"
              value={form.name}
              onChange={handleChange}
              style={{ marginRight: "10px", padding: "8px" }}
            />
            {errors.name && <span style={{ color: "red" }}>{errors.name}</span>}
            <br /><br />

            <input
              type="number"
              name="price"
              placeholder="Price"
              value={form.price}
              onChange={handleChange}
              style={{ marginRight: "10px", padding: "8px" }}
            />
            {errors.price && <span style={{ color: "red" }}>{errors.price}</span>}
            <br /><br />

            <input
              type="text"
              name="image"
              placeholder="Image URL"
              value={form.image}
              onChange={handleChange}
              style={{ marginRight: "10px", padding: "8px" }}
            />
            {errors.image && <span style={{ color: "red" }}>{errors.image}</span>}
            <br /><br />

            <input
              type="number"
              name="discount"
              placeholder="Discount % (optional)"
              value={form.discount}
              onChange={handleChange}
              style={{ marginRight: "10px", padding: "8px" }}
            />
            {errors.discount && <span style={{ color: "red" }}>{errors.discount}</span>}
            <br /><br />

            <button type="submit" style={{ padding: "10px 20px", background: "blue", color: "white", border: "none", borderRadius: "5px" }}>
              Add Product
            </button>
          </form>

          <div style={{ display: "flex", flexWrap: "wrap" }}>
            {products.map((p, index) => (
              <ProductCard key={index} {...p} />
            ))}
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<App />);
  </script>
</body>
</html>
