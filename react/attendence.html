<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Attendance Manager</title>
</head>
<body>
  <!-- Root element for React app -->
  <div id="root"></div>

  <!-- React and ReactDOM from CDN -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <!-- Babel for JSX support -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- React App Code -->
  <script type="text/babel">
    function AttendanceManager() {
      // ✅ Initialize with sample students
      const [students, setStudents] = React.useState([
        { id: 1, name: "Akhil", present: true },
        { id: 2, name: "Joseph", present: false },
        { id: 3, name: "Sneha", present: true },
        { id: 4, name: "Rahul", present: false },
        { id: 5, name: "Meera", present: true }
      ]);

      // ✅ State for filter (All, Present, Absent)
      const [filter, setFilter] = React.useState("All");

      // ✅ Function to toggle attendance for a student
      const toggleAttendance = (id) => {
        // map over students and flip the "present" value of matched student
        const updated = students.map((student) =>
          student.id === id ? { ...student, present: !student.present } : student
        );
        setStudents(updated);
      };

      // ✅ Count how many are present
      const totalPresent = students.filter((s) => s.present).length;

      // ✅ Filter students based on dropdown
      const filteredStudents = students.filter((student) => {
        if (filter === "All") return true;
        if (filter === "Present") return student.present === true;
        if (filter === "Absent") return student.present === false;
      });

      return (
        <div style={{ margin: "20px", fontFamily: "Arial" }}>
          <h2>Attendance Manager</h2>

          {/* Dropdown filter */}
          <label>
            Filter:{" "}
            <select value={filter} onChange={(e) => setFilter(e.target.value)}>
              <option value="All">All</option>
              <option value="Present">Present</option>
              <option value="Absent">Absent</option>
            </select>
          </label>

          <hr />

          {/* Show list of students */}
          <ul>
            {filteredStudents.map((student) => (
              <li
                key={student.id}
                style={{
                  color: student.present ? "green" : "red", // ✅ Green if present, red if absent
                  marginBottom: "8px"
                }}
              >
                {student.name} - {student.present ? "Present" : "Absent"}
                <button
                  onClick={() => toggleAttendance(student.id)}
                  style={{ marginLeft: "10px" }}
                >
                  Toggle
                </button>
              </li>
            ))}
          </ul>

          <hr />

          {/* ✅ Total present count */}
          <p>
            Total Present: <b>{totalPresent}</b> / {students.length}
          </p>
        </div>
      );
    }

    // Render AttendanceManager inside root div
    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<AttendanceManager />);
  </script>
</body>
</html>
