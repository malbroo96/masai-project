<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>React Todo List (CDN)</title>
    <!-- ✅ React and ReactDOM from CDN -->
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.development.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
    ></script>
    <!-- ✅ Babel allows us to write JSX directly inside <script type="text/babel"> -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body>
    <!-- ✅ Root element where React will render our app -->
    <div id="root"></div>

    <!-- ============================= -->
    <!-- React App Code (with comments) -->
    <!-- ============================= -->
    <script type="text/babel">
      // ✅ Import useState hook from React
      const { useState } = React;

      // ====================
      // TodoList Component
      // ====================
      function TodoList() {
        // ✅ State: tasks (array of tasks), setTasks (function to update tasks)
        const [tasks, setTasks] = useState([]);

        // ✅ State: input text from the input box
        const [input, setInput] = useState("");

        // =========================
        // Function to add a new task
        // =========================
        const addTask = () => {
          if (input.trim() === "") return; // ❌ Prevent empty tasks

          // ✅ New task object
          const newTask = {
            id: Date.now(), // unique id using timestamp
            text: input.trim(),
            completed: false, // starts as incomplete
          };

          // ✅ Add new task into tasks list
          setTasks([...tasks, newTask]);

          // ✅ Clear input after adding
          setInput("");
        };

        // =================================
        // Function to toggle task completion
        // =================================
        const toggleComplete = (id) => {
          const updatedTasks = tasks.map((task) =>
            task.id === id ? { ...task, completed: !task.completed } : task
          );
          setTasks(updatedTasks);
        };

        // =========================
        // Function to delete a task
        // =========================
        const deleteTask = (id) => {
          const remainingTasks = tasks.filter((task) => task.id !== id);
          setTasks(remainingTasks);
        };

        // =========================
        // JSX (UI Rendering)
        // =========================
        return (
          <div>
            {/* Input field for typing new task */}
            <input
              value={input} // show input state
              onChange={(e) => setInput(e.target.value)} // update when typing
              onKeyDown={(e) => e.key === "Enter" && addTask()} // add on Enter key
              placeholder="Add new task"
            />

            {/* Button to add task */}
            <button onClick={addTask}>Add Task</button>

            {/* Task list */}
            <ul>
              {tasks.map((task) => (
                <li key={task.id}>
                  {/* Task text (click to toggle complete) */}
                  <span
                    onClick={() => toggleComplete(task.id)}
                    style={{
                      textDecoration: task.completed ? "line-through" : "none", // strike-through if completed
                      cursor: "pointer",
                    }}
                  >
                    {task.text}
                  </span>

                  {/* Button to delete task */}
                  <button onClick={() => deleteTask(task.id)}>Delete</button>
                </li>
              ))}
            </ul>

            {/* Show message if no tasks */}
            {tasks.length === 0 && <p>No tasks yet. Add one above!</p>}
          </div>
        );
      }

      // ✅ Render TodoList component into #root
      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<TodoList />);
    </script>
  </body>
</html>
