<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width, initial-scale=1.0" />
    <title>novel manager</title>
  </head>
  <body>
    <form id="form">
      <input id="name" placeholder="enter name" />
      <button id="btn" type="submit">save</button>
    </form>

    <div id="list"></div>

    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-analytics.js";
      import {
        getDatabase,
        ref,
        push,
        set,
        onValue,
        remove,
      } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-database.js";
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries

      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      const firebaseConfig = {
        apiKey: "AIzaSyAbriwRxa38MMmCWQn0bM4uvCCd5ewhhWE",
        authDomain: "library-49fb4.firebaseapp.com",
        databaseURL:
          "https://library-49fb4-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "library-49fb4",
        storageBucket: "library-49fb4.firebasestorage.app",
        messagingSenderId: "909495889789",
        appId: "1:909495889789:web:387ac8cc7d333a17a22614",
        measurementId: "G-3MXXEGR6D1",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);

      const db = getDatabase(app);

      let form = document.getElementById("form");

      form.addEventListener("submit", (e) => {
        e.preventDefault();
        let input = document.getElementById("name").value;
        console.log(input);
        const novel = {
          name: input,
        };

        const novelref = ref(db, "novels/");
        const newnovelRef = push(novelref);
        set(newnovelRef, novel);

        form.reset();
      });

      window.addEventListener("DOMContentLoaded", () => {
          let list = document.getElementById("list");
        const novelref = ref(db, "novels/");
        onValue(novelref, (row) => {
          const rowdata = row.val();
          console.log(rowdata);
          for (let id in rowdata) {
            const x=rowdata[id]


            const newdiv = document.createElement("div");
            newdiv.innerHTML = `${x.name}`;
          
            list.appendChild(newdiv);
          }
         
        });
      });
    </script>
  </body>
</html>
